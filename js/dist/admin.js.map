{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/webhooks/./src/admin/components/SettingsListItem.js","webpack://@fof/webhooks/./src/admin/components/WebhookEditModal.js","webpack://@fof/webhooks/./src/admin/components/WebhooksPage.js","webpack://@fof/webhooks/./src/admin/index.js","webpack://@fof/webhooks/./src/admin/models/Webhook.js","webpack://@fof/webhooks/external root \"flarum.core.compat['admin/app']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/models/Forum']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/models/Group']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/webhooks/external root \"flarum.core.compat['tags/common/helpers/tagIcon']\"","webpack://@fof/webhooks/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/webhooks/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/webhooks/webpack/bootstrap","webpack://@fof/webhooks/webpack/runtime/compat get default export","webpack://@fof/webhooks/webpack/runtime/define property getters","webpack://@fof/webhooks/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/webhooks/webpack/runtime/make namespace object","webpack://@fof/webhooks/./admin.js"],"sourcesContent":["import app from 'flarum/admin/app';\r\nimport Component from 'flarum/common/Component';\r\nimport Dropdown from 'flarum/common/components/Dropdown';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Select from 'flarum/common/components/Select';\r\nimport Alert from 'flarum/common/components/Alert';\r\nimport Stream from 'flarum/common/utils/Stream';\r\nimport withAttr from 'flarum/common/utils/withAttr';\r\n\r\nimport WebhookEditModal from './WebhookEditModal';\r\n\r\nexport default class SettingsListItem extends Component {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.webhook = this.attrs.webhook;\r\n    this.services = this.attrs.services;\r\n\r\n    this.url = Stream(this.webhook.url());\r\n    this.service = Stream(this.webhook.service());\r\n    this.events = Stream(this.webhook.events());\r\n    this.error = Stream(this.webhook.error());\r\n\r\n    this.loading = {};\r\n  }\r\n\r\n  view() {\r\n    const { webhook, services } = this;\r\n\r\n    const service = webhook.service();\r\n    const errors = [webhook.error && webhook.error()];\r\n\r\n    if (!services[service]) {\r\n      errors.push(app.translator.trans('fof-webhooks.admin.errors.service_not_found', { service }));\r\n    } else if (!webhook.isValid()) {\r\n      errors.push(app.translator.trans('fof-webhooks.admin.errors.url_invalid'));\r\n    } else if (!webhook.tag() && webhook.attribute('tag_id')) {\r\n      errors.push(app.translator.trans('fof-webhooks.admin.errors.tag_invalid'));\r\n    }\r\n\r\n    const tagIcon = require('flarum/tags/common/helpers/tagIcon');\r\n    const tag = webhook.tag();\r\n    const tagIdLoading = !!this.loading['tag_id'];\r\n\r\n    return (\r\n      <div className=\"Webhooks--row\" data-webhook-id={webhook.id()}>\r\n        <div className=\"Webhook-input\">\r\n          <Select options={services} value={service} onchange={this.update('service')} disabled={this.loading['service']} />\r\n\r\n          <input\r\n            className=\"FormControl Webhook-url\"\r\n            type=\"url\"\r\n            value={this.url()}\r\n            onchange={withAttr('value', this.update('url'))}\r\n            disabled={this.loading['url']}\r\n            placeholder={app.translator.trans('fof-webhooks.admin.settings.help.url')}\r\n          />\r\n\r\n          {tagIcon && (\r\n            <Dropdown\r\n              buttonClassName=\"Button\"\r\n              label={\r\n                tag ? (\r\n                  <span>\r\n                    {!tagIdLoading && tagIcon(tag, { className: 'Button-icon' })} {tag.name()}\r\n                  </span>\r\n                ) : (\r\n                  app.translator.trans('fof-webhooks.admin.settings.item.tag_any_label')\r\n                )\r\n              }\r\n              icon={tagIdLoading ? 'fas fa-spinner fa-spin' : tag ? true : 'fas fa-tag'}\r\n              caretIcon={null}\r\n            >\r\n              <Button icon={'fas fa-tag'} onclick={() => this.update('tag_id')(null)}>\r\n                {app.translator.trans('fof-webhooks.admin.settings.item.tag_any_label')}\r\n              </Button>\r\n\r\n              <hr />\r\n\r\n              {app.store.all('tags').map((tag) => (\r\n                <Button icon={true} onclick={() => this.update('tag_id')(tag.id())}>\r\n                  {tagIcon(tag, { className: 'Button-icon' })} {tag.name()}\r\n                </Button>\r\n              ))}\r\n            </Dropdown>\r\n          )}\r\n\r\n          <Button\r\n            type=\"button\"\r\n            className=\"Button Webhook-button\"\r\n            icon=\"fas fa-edit\"\r\n            onclick={() =>\r\n              app.modal.show(WebhookEditModal, {\r\n                webhook,\r\n                updateWebhook: this.update('events'),\r\n              })\r\n            }\r\n          />\r\n\r\n          <Button type=\"button\" className=\"Button Button--warning Webhook-button\" icon=\"fas fa-times\" onclick={this.delete.bind(this)} />\r\n        </div>\r\n\r\n        {!this.events().length && (\r\n          <Alert className=\"Webhook-error\" dismissible={false}>\r\n            {app.translator.trans('fof-webhooks.admin.settings.help.disabled')}\r\n          </Alert>\r\n        )}\r\n\r\n        {errors.filter(Boolean).map((error) => (\r\n          <Alert className=\"Webhook-error\" type=\"error\" dismissible={false}>\r\n            {app.translator.trans(error)}\r\n          </Alert>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  update(field) {\r\n    return (value) => {\r\n      this.loading[field] = true;\r\n\r\n      return this.webhook\r\n        .save({\r\n          [field]: value,\r\n        })\r\n        .catch(() => {})\r\n        .then(() => {\r\n          this.loading[field] = false;\r\n\r\n          if (this[field]) this[field](value);\r\n\r\n          m.redraw();\r\n        });\r\n    };\r\n  }\r\n\r\n  delete() {\r\n    return this.webhook.delete().then(() => m.redraw());\r\n  }\r\n}\r\n","import app from 'flarum/admin/app';\r\nimport Switch from 'flarum/common/components/Switch';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Dropdown from 'flarum/common/components/Dropdown';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport Group from 'flarum/common/models/Group';\r\nimport Modal from 'flarum/common/components/Modal';\r\nimport Stream from 'flarum/common/utils/Stream';\r\n\r\nconst sortByProp = (prop) => (a, b) => {\r\n  const propA = a[prop].toUpperCase(); // ignore upper and lowercase\r\n  const propB = b[prop].toUpperCase(); // ignore upper and lowercase\r\n\r\n  return propA < propB ? -1 : propA > propB ? 1 : 0;\r\n};\r\n\r\nconst groupBy = (obj, fn) => {\r\n  const keys = Object.keys(obj);\r\n  const vals = Object.values(obj);\r\n\r\n  return keys.map(typeof fn === 'function' ? fn : (val) => val[fn]).reduce((acc, val, i) => {\r\n    if (!acc[val]) acc[val] = {};\r\n\r\n    acc[val][keys[i]] = vals[i];\r\n\r\n    return acc;\r\n  }, {});\r\n};\r\n\r\nexport default class WebhookEditModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.webhook = this.attrs.webhook;\r\n\r\n    const events = app.data['fof-webhooks.events'];\r\n\r\n    this.groupId = Stream(this.webhook.groupId() || Group.GUEST_ID);\r\n    this.extraText = Stream(this.webhook.extraText() || '');\r\n    this.usePlainText = Stream(this.webhook.usePlainText());\r\n    this.maxPostContentLength = Stream(this.webhook.maxPostContentLength());\r\n\r\n    this.events = groupBy(\r\n      events.reduce(\r\n        (obj, evt) => {\r\n          const m = /((?:[a-z]+\\\\?)+?)\\\\Events?\\\\([a-z]+)/i.exec(evt);\r\n\r\n          if (!m) {\r\n            obj.other.push({\r\n              full: evt,\r\n              name: evt,\r\n            });\r\n            obj.other = obj.other.sort();\r\n            return obj;\r\n          }\r\n\r\n          const group = m[1].toLowerCase().replace('\\\\', '.');\r\n\r\n          if (!obj[group]) obj[group] = [];\r\n\r\n          obj[group] = obj[group]\r\n            .concat({\r\n              full: evt,\r\n              name: m[2],\r\n            })\r\n            .sort();\r\n\r\n          return obj;\r\n        },\r\n        { other: [] }\r\n      ),\r\n      (key) => key.split('.')[0]\r\n    );\r\n  }\r\n\r\n  className() {\r\n    return 'Modal--medium';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('fof-webhooks.admin.settings.modal.title');\r\n  }\r\n\r\n  content() {\r\n    const icons = {\r\n      2: 'fas fa-globe',\r\n      3: 'fas fa-user',\r\n    };\r\n\r\n    const group = app.store.getById('groups', this.groupId());\r\n\r\n    return (\r\n      <div className=\"FofWebhooksModal Modal-body\">\r\n        <form className=\"Form\" onsubmit={this.onsubmit.bind(this)}>\r\n          <Switch state={this.usePlainText()} onchange={this.usePlainText}>\r\n            {app.translator.trans('fof-webhooks.admin.settings.modal.use_plain_text_label')}\r\n          </Switch>\r\n\r\n          <div className=\"Form-group\">\r\n            <label className=\"label\">{app.translator.trans('fof-webhooks.admin.settings.modal.max_post_content_length_label')}</label>\r\n\r\n            <p className=\"helpText\">{app.translator.trans('fof-webhooks.admin.settings.modal.max_post_content_length_help')}</p>\r\n\r\n            <input type=\"number\" min=\"0\" className=\"FormControl\" bidi={this.maxPostContentLength} onkeypress={this.onkeypress.bind(this)} />\r\n          </div>\r\n\r\n          <div className=\"Form-group hasLoading\">\r\n            <label className=\"label\">{app.translator.trans('fof-webhooks.admin.settings.modal.extra_text_label')}</label>\r\n\r\n            <p className=\"helpText\">{app.translator.trans('fof-webhooks.admin.settings.modal.extra_text_help')}</p>\r\n\r\n            <input type=\"text\" className=\"FormControl\" bidi={this.extraText} onkeypress={this.onkeypress.bind(this)} />\r\n          </div>\r\n\r\n          <div className=\"Form-group\">\r\n            <label className=\"label\">{app.translator.trans('fof-webhooks.admin.settings.modal.group_label')}</label>\r\n            <p className=\"helpText\">{app.translator.trans('fof-webhooks.admin.settings.modal.group_help')}</p>\r\n\r\n            <Dropdown label={[icon(group.icon() || icons[group.id()]), group.namePlural()]} buttonClassName=\"Button Button--danger\">\r\n              {app.store\r\n                .all('groups')\r\n                .filter((g) => ['1', '2'].includes(g.id()))\r\n                .map((g) => (\r\n                  <Button\r\n                    active={group.id() === g.id()}\r\n                    disabled={group.id() === g.id()}\r\n                    icon={g.icon() || icons[g.id()]}\r\n                    onclick={() => this.groupId(g.id())}\r\n                  >\r\n                    {g.namePlural()}\r\n                  </Button>\r\n                ))}\r\n            </Dropdown>\r\n          </div>\r\n\r\n          <div className=\"Form-group Webhook-events\">\r\n            <label className=\"label\">{app.translator.trans('fof-webhooks.admin.settings.modal.events_label')}</label>\r\n\r\n            {app.translator.trans('fof-webhooks.admin.settings.modal.description')}\r\n\r\n            {Object.entries(this.events).map(([, events]) => (\r\n              <div>\r\n                {Object.entries(events)\r\n                  .sort(sortByProp(0))\r\n                  .map(([group, events]) =>\r\n                    events.length ? (\r\n                      <div>\r\n                        <h3>{this.translate(group)}</h3>\r\n                        {events.map((event) => (\r\n                          <Switch state={this.webhook.events().includes(event.full)} onchange={this.onchange.bind(this, event.full)}>\r\n                            {this.translate(group, event.name.toLowerCase())}\r\n                          </Switch>\r\n                        ))}\r\n                      </div>\r\n                    ) : null\r\n                  )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"Form-group\">\r\n            <Button type=\"submit\" className=\"Button Button--primary\" loading={this.loading} disabled={!this.isDirty()}>\r\n              {app.translator.trans('core.admin.settings.submit_button')}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  translate(group, key = 'title') {\r\n    return app.translator.trans(`fof-webhooks.admin.settings.actions.${group}.${key}`);\r\n  }\r\n\r\n  isDirty() {\r\n    return (\r\n      this.extraText() != this.webhook.extraText() ||\r\n      this.groupId() !== this.webhook.groupId() ||\r\n      this.usePlainText() !== this.webhook.usePlainText() ||\r\n      this.maxPostContentLength() != this.webhook.maxPostContentLength()\r\n    );\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    return this.webhook\r\n      .save({\r\n        extraText: this.extraText(),\r\n        group_id: this.groupId(),\r\n        use_plain_text: this.usePlainText(),\r\n        max_post_content_length: this.maxPostContentLength() || 0,\r\n      })\r\n      .then(() => {\r\n        this.loading = false;\r\n        m.redraw();\r\n      })\r\n      .catch(() => {\r\n        this.loading = false;\r\n        m.redraw();\r\n      });\r\n  }\r\n\r\n  onkeypress(e) {\r\n    if (e.key === 'Enter') {\r\n      this.onsubmit(e);\r\n    }\r\n  }\r\n\r\n  onchange(event, checked, component) {\r\n    component.loading = true;\r\n\r\n    let events = this.webhook.events();\r\n\r\n    if (checked) {\r\n      events.push(event);\r\n    } else {\r\n      events.splice(events.indexOf(event), 1);\r\n    }\r\n\r\n    return this.attrs.updateWebhook(events).then(() => {\r\n      component.loading = false;\r\n      m.redraw();\r\n    });\r\n  }\r\n}\r\n","import app from 'flarum/admin/app';\r\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\r\nimport Stream from 'flarum/common/utils/Stream';\r\nimport withAttr from 'flarum/common/utils/withAttr';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Select from 'flarum/common/components/Select';\r\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\r\n\r\nimport SettingsListItem from './SettingsListItem';\r\n\r\nexport default class WebhooksPage extends ExtensionPage {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.values = {};\r\n    this.services = app.data['fof-webhooks.services'].reduce((o, service) => {\r\n      o[service] = app.translator.trans(`fof-webhooks.admin.settings.services.${service}`);\r\n      return o;\r\n    }, {});\r\n\r\n    this.newWebhook = {\r\n      service: Stream('discord'),\r\n      url: Stream(''),\r\n      loading: Stream(false),\r\n    };\r\n\r\n    this.loadingTags = this.isTagsEnabled();\r\n  }\r\n\r\n  oncreate(vnode) {\r\n    super.oncreate(vnode);\r\n\r\n    if (this.loadingTags) {\r\n      app.store.find('tags').then(() => {\r\n        this.loadingTags = false;\r\n\r\n        m.redraw();\r\n      });\r\n    }\r\n  }\r\n\r\n  content() {\r\n    const webhooks = app.store.all('webhooks');\r\n\r\n    if (this.loadingTags) {\r\n      return <LoadingIndicator />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"WebhookContent\">\r\n        <div className=\"container\">\r\n          <div className=\"Form-group\">\r\n            {this.buildSettingComponent({\r\n              type: 'boolean',\r\n              setting: 'fof-webhooks.debug',\r\n              label: app.translator.trans('fof-webhooks.admin.settings.debug_label'),\r\n              help: app.translator.trans('fof-webhooks.admin.settings.debug_help'),\r\n              loading: this.loading,\r\n              onchange: this.updateDebug.bind(this),\r\n            })}\r\n          </div>\r\n\r\n          <hr />\r\n\r\n          <form>\r\n            <p className=\"helpText\">{app.translator.trans('fof-webhooks.admin.settings.help.general')}</p>\r\n            <fieldset>\r\n              <div className=\"Webhooks--Container\">\r\n                {webhooks.map((webhook) => (\r\n                  <SettingsListItem webhook={webhook} services={this.services} />\r\n                ))}\r\n                <div className=\"Webhooks--row\">\r\n                  <div className=\"Webhook-input\">\r\n                    <Select options={this.services} value={this.newWebhook.service()} onchange={this.newWebhook.service} />\r\n\r\n                    <input\r\n                      className=\"FormControl Webhook-url\"\r\n                      type=\"url\"\r\n                      placeholder={app.translator.trans('fof-webhooks.admin.settings.help.url')}\r\n                      onchange={withAttr('value', this.newWebhook.url)}\r\n                      onkeypress={this.onkeypress.bind(this)}\r\n                    />\r\n\r\n                    <Button\r\n                      type=\"button\"\r\n                      loading={this.newWebhook.loading()}\r\n                      className=\"Button Button--warning Webhook-button\"\r\n                      icon=\"fas fa-plus\"\r\n                      onclick={this.addWebhook.bind(this)}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </fieldset>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  addWebhook() {\r\n    if (this.newWebhook.loading()) return;\r\n\r\n    this.newWebhook.loading(true);\r\n\r\n    return app.store\r\n      .createRecord('webhooks')\r\n      .save({\r\n        service: this.newWebhook.service(),\r\n        url: this.newWebhook.url(),\r\n      })\r\n      .then(() => {\r\n        this.newWebhook.service('discord');\r\n        this.newWebhook.url('');\r\n        this.newWebhook.loading(false);\r\n\r\n        m.redraw();\r\n      })\r\n      .catch(() => {\r\n        this.newWebhook.loading(false);\r\n\r\n        m.redraw();\r\n      });\r\n  }\r\n\r\n  onkeypress(e) {\r\n    if (e.key === 'Enter') {\r\n      this.addWebhook();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns boolean\r\n   */\r\n  changed() {\r\n    return this.fields.some((key) => this.values[key]() !== (app.data.settings[this.addPrefix(key)] || ''));\r\n  }\r\n\r\n  isTagsEnabled() {\r\n    return !!flarum.extensions['flarum-tags'];\r\n  }\r\n\r\n  updateDebug(state) {\r\n    this.setting('fof-webhooks.debug')(state);\r\n\r\n    return this.saveSettings(new Event(null));\r\n  }\r\n}\r\n","import app from 'flarum/admin/app';\nimport Model from 'flarum/common/Model';\nimport Forum from 'flarum/common/models/Forum';\n\nimport Webhook from './models/Webhook';\nimport WebhooksPage from './components/WebhooksPage';\n\napp.initializers.add('fof/webhooks', () => {\n  app.store.models.webhooks = Webhook;\n\n  Forum.prototype.webhooks = Model.hasMany('webhooks');\n\n  app.extensionData.for('fof-webhooks').registerPage(WebhooksPage);\n});\n","import app from 'flarum/admin/app';\r\nimport Model from 'flarum/common/Model';\r\n\r\nexport default class Webhook extends Model {\r\n  id = Model.attribute('id');\r\n  service = Model.attribute('service');\r\n  url = Model.attribute('url');\r\n\r\n  error = Model.attribute('error');\r\n  events = Model.attribute('events');\r\n\r\n  tagId = Model.attribute('tag_id');\r\n\r\n  groupId = Model.attribute('group_id');\r\n  extraText = Model.attribute('extra_text');\r\n\r\n  isValid = Model.attribute('is_valid', Boolean);\r\n\r\n  usePlainText = Model.attribute('use_plain_text', Boolean);\r\n  maxPostContentLength = Model.attribute('max_post_content_length');\r\n\r\n  apiEndpoint() {\r\n    return `/fof/webhooks${this.exists ? `/${this.data.id}` : ''}`;\r\n  }\r\n\r\n  tag() {\r\n    return app.store.getById('tags', this.tagId());\r\n  }\r\n}\r\n","module.exports = flarum.core.compat['admin/app'];","module.exports = flarum.core.compat['admin/components/ExtensionPage'];","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/components/Alert'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Dropdown'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/Select'];","module.exports = flarum.core.compat['common/components/Switch'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/models/Forum'];","module.exports = flarum.core.compat['common/models/Group'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/utils/withAttr'];","module.exports = flarum.core.compat['tags/common/helpers/tagIcon'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/admin';\r\n"],"names":["app","Component","Dropdown","Button","Select","Alert","Stream","withAttr","WebhookEditModal","SettingsListItem","oninit","vnode","webhook","attrs","services","url","service","events","error","loading","view","errors","push","translator","trans","isValid","tag","attribute","tagIcon","require","tagIdLoading","id","update","className","name","store","all","map","modal","show","updateWebhook","bind","length","filter","Boolean","field","value","save","then","m","redraw","Switch","icon","Group","Modal","sortByProp","prop","a","b","propA","toUpperCase","propB","groupBy","obj","fn","keys","Object","vals","values","val","reduce","acc","i","data","groupId","GUEST_ID","extraText","usePlainText","maxPostContentLength","evt","exec","other","full","sort","group","toLowerCase","replace","concat","key","split","title","content","icons","getById","onsubmit","onkeypress","namePlural","g","includes","entries","translate","event","onchange","isDirty","e","preventDefault","group_id","use_plain_text","max_post_content_length","checked","component","splice","indexOf","ExtensionPage","LoadingIndicator","WebhooksPage","o","newWebhook","loadingTags","isTagsEnabled","oncreate","find","webhooks","buildSettingComponent","type","setting","label","help","updateDebug","addWebhook","createRecord","changed","fields","some","settings","addPrefix","flarum","extensions","state","saveSettings","Event","Model","Forum","Webhook","initializers","add","models","prototype","hasMany","extensionData","registerPage","tagId","apiEndpoint","exists","setPrototypeOf","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","p","__proto__"],"sourceRoot":""}